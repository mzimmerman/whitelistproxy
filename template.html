{{define "deny"}}
<html>
	<body>
		<h1>Access Denied</h1>
		<h2>{{.Request.Host}} is not in the whitelist.</h2>
		{{range $_, $path := paths .Request.URL.Path}}
			<a href="http://proxy:9000/add?url={{$.Request.URL}}&host={{$.Request.Host}}&match=false&path={{$path}}">Add {{$.Request.Host}}{{$path}}</a>
		{{end}}
		<a href="http://proxy:9000/add?url={{$.Request.URL}}&host={{$.Request.Host}}&match=false">Add {{$.Request.Host}}</a>
		{{range $_, $root := rootDomains .Request.Host}}
			<a href="http://proxy:9000/add?url={{$.Request.URL}}&host={{$root}}&match=true">Add *.{{$root}}</a>
		{{end}}
	</body>
</html>
{{end}}

{{define "error"}}
<html>
	<body>
		<h1>Error</h1>
		<h2>Error adding site: {{.Error}}</h2>
	</body>
</html>
{{end}}

{{define "/list"}}
<html>
	<body>
		<h1>Recent blocked sites</h1>
		{{range .List}}
			<p><h4>{{.}}</h4>
				{{range $_, $path := paths .Path}}
					<a href="http://proxy:9000/add?url={{$}}&host={{$.Host}}&match=false&path={{$path}}">Add {{$.Host}}{{$path}}</a>
				{{end}}
				<a href="http://proxy:9000/add?url={{$}}&host={{$.Host}}&match=false">Add {{$.Host}}</a>
				{{range $_, $root := rootDomains .Host}}
					<a href="http://proxy:9000/add?url={{$}}&host={{$root}}&match=true">Add *.{{$root}}</a>
				{{end}}
			</p>
		{{end}}
	</body>
</html>
{{end}}
